<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OfferView - Tu Ventana a Las Mejores Ofertas</title>

<style>
:root{
  --primary:#F59E0B;
  --secondary:#2563EB;
  --bg:#F9FAFB;
  --text:#111827;
  --card:#ffffff;
  --highlight:#FDE68A;
}

/* BASE */
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:var(--bg);
  color:var(--text);
}

header{
  text-align:center;
  padding:40px 15px;
  background:linear-gradient(180deg,#0b1633,#0f1f45);
  color:#fff;
}

header h1{
  color:var(--primary);
  font-size:36px;
  margin-bottom:6px;
}

header p{
  margin:0;
  font-size:16px;
  opacity:.95;
}

.section-title{
  text-align:center;
  color:var(--primary);
  margin:45px 0 20px;
  font-size:26px;
  font-weight:700;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:16px;
  padding:0 18px 35px;
}

.card{
  background:var(--card);
  border-radius:16px;
  padding:18px;
  text-align:center;
  text-decoration:none;
  color:var(--secondary);
  font-weight:700;
  box-shadow:0 8px 22px rgba(0,0,0,0.06);
  transition:.3s all;
  position:relative;
  cursor:pointer;
}

/* HOVER + REBOTE SUAVE */
.card:hover{
  transform:translateY(-6px) scale(1.05);
  background:var(--primary);
  color:#fff;
  box-shadow:0 18px 36px rgba(0,0,0,0.18);
}

.popular{
  animation:rebote 2s infinite;
}

/* OFERTAS */
.offer-card{
  border:2px solid var(--primary);
}

.offer-card span{
  display:block;
  font-size:14px;
  font-weight:normal;
  margin-top:6px;
}

/* BADGES */
.badge{
  position:absolute;
  top:10px;
  right:12px;
  background:#ef4444;
  color:#fff;
  font-size:11px;
  padding:4px 8px;
  border-radius:999px;
  opacity:0;
  transform:scale(0);
  animation:badgeIn 0.4s forwards;
}

/* FAVORITOS */
.favorite{
  position:absolute;
  bottom:10px;
  right:12px;
  font-size:16px;
  cursor:pointer;
  opacity:.6;
  transition:all .3s;
}

.favorite.active{
  color:#ef4444;
  opacity:1;
}

/* ANIMACIONES */
@keyframes popIn{
  0%{opacity:0; transform:translateY(20px) scale(0.9);}
  100%{opacity:1; transform:translateY(0) scale(1);}
}

@keyframes badgeIn{
  0%{opacity:0; transform:scale(0);}
  100%{opacity:1; transform:scale(1);}
}

@keyframes rebote{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-8px);}
}

/* REVEAL */
.reveal{
  opacity:0;
  transform:translateY(25px);
  transition:all .6s ease;
}

.reveal.active{
  opacity:1;
  transform:translateY(0);
}

/* SLIDER */
.slider{
  overflow:hidden;
  padding:0 18px 35px;
}

.slider-track{
  display:flex;
  gap:16px;
  transition:transform .6s ease;
}

.slider-track .card{
  min-width:230px;
}

footer{
  text-align:center;
  padding:35px 15px;
  background:#eef2f7;
  font-size:14px;
}
</style>
</head>

<body>

<header>
  <h1>OFFERVIEW</h1>
  <p>Tu Ventana a Las Mejores Ofertas</p>
</header>

<!-- üî• OFERTAS DESTACADAS -->
<h2 class="section-title">üî• Ofertas Destacadas</h2>
<div class="slider">
  <div class="slider-track" id="ofertas"></div>
</div>

<!-- SECCIONES -->
<h2 class="section-title">Top Stores</h2>
<div class="grid reveal" id="top-stores"></div>

<h2 class="section-title">Gaming Stores</h2>
<div class="grid reveal" id="gaming-stores"></div>

<h2 class="section-title">Tecnolog√≠a Stores</h2>
<div class="grid reveal" id="tech-stores"></div>

<h2 class="section-title">Calzados</h2>
<div class="grid reveal" id="calzados-stores"></div>

<h2 class="section-title">Hoteles y Vuelos</h2>
<div class="grid reveal" id="hoteles-stores"></div>

<h2 class="section-title">Lencer√≠a & Moda Stores</h2>
<div class="grid reveal" id="lenceria-stores"></div>

<footer>
¬© 2025 <strong>OfferView</strong> ¬∑ Tu Ventana a Las Mejores Ofertas
</footer>

<script>
let favoritos=JSON.parse(localStorage.getItem("favoritos"))||[];
let preferencias=JSON.parse(localStorage.getItem("preferencias"))||{};

/* Crear card */
function crearCard(oferta){
  const a=document.createElement("a");
  a.href=oferta.link;
  a.target="_blank";
  a.className="card offer-card reveal";
  
  // Si la oferta es popular seg√∫n preferencias, se le da animaci√≥n rebote
  if(preferencias[oferta.categoria]>=2){
    a.classList.add("popular");
  }

  a.innerHTML=`
    <div class="badge">${oferta.badge||''}</div>
    ${oferta.nombre}
    <span>${oferta.precio} ¬∑ ${oferta.tienda}</span>
    <div class="favorite ${favoritos.includes(oferta.nombre)?"active":""}">‚ù§</div>
  `;

  a.querySelector(".favorite").onclick=e=>{
    e.preventDefault();e.stopPropagation();
    favoritos.includes(oferta.nombre)?
      favoritos=favoritos.filter(f=>f!==oferta.nombre):
      favoritos.push(oferta.nombre);
    preferencias[oferta.categoria]=(preferencias[oferta.categoria]||0)+1;
    localStorage.setItem("favoritos",JSON.stringify(favoritos));
    localStorage.setItem("preferencias",JSON.stringify(preferencias));
    e.target.classList.toggle("active");
  };
  return a;
}

/* IA: cargar ofertas desde backend */
async function cargarOfertas(){
  try{
    const res=await fetch("http://localhost:3000/api/ofertas-destacadas");
    const data=await res.json();
    const cont=document.getElementById("ofertas");
    cont.innerHTML='';
    data.forEach(o=>cont.appendChild(crearCard(o)));
  }catch(e){
    console.error("No se pudo cargar la IA:", e);
  }
}

/* Cargar stores */
function cargarStores(id, lista){
  const cont=document.getElementById(id);
  lista.forEach(s=>{
    const a=document.createElement("a");
    a.href=s.link;
    a.target="_blank";
    a.className="card reveal";
    a.textContent=s.nombre;
    cont.appendChild(a);
  });
}

/* Inicializaci√≥n */
document.addEventListener("DOMContentLoaded",()=>{
  cargarOfertas();

  cargarStores("top-stores",[
    {nombre:"Temu", link:"https://www.temu.com"},
    {nombre:"AliExpress", link:"https://www.aliexpress.com"},
    {nombre:"Alibaba", link:"https://www.alibaba.com"},
    {nombre:"DHgate", link:"https://www.dhgate.com"},
    {nombre:"Banggood", link:"https://www.banggood.com"},
    {nombre:"LightInTheBox", link:"https://www.lightinthebox.com"},
    {nombre:"Shein", link:"https://www.shein.com"},
    {nombre:"Wish", link:"https://www.wish.com"},
    {nombre:"Joom", link:"https://www.joom.com"},
    {nombre:"Romwe", link:"https://www.romwe.com"},
    {nombre:"MercadoLibre", link:"https://www.mercadolibre.com"},
    {nombre:"Walmart", link:"https://www.walmart.com"}
  ]);

  cargarStores("gaming-stores",[
    {nombre:"Steam", link:"https://store.steampowered.com"},
    {nombre:"Epic Games", link:"https://store.epicgames.com"},
    {nombre:"G2A", link:"https://www.g2a.com"},
    {nombre:"Kinguin", link:"https://www.kinguin.net"},
    {nombre:"Eneba", link:"https://www.eneba.com"},
    {nombre:"Humble Bundle", link:"https://www.humblebundle.com"},
    {nombre:"PlayStation Store", link:"https://store.playstation.com"},
    {nombre:"Xbox Store", link:"https://www.xbox.com/store"},
    {nombre:"Nintendo eShop", link:"https://www.nintendo.com/store"},
    {nombre:"Battle.net", link:"https://shop.battle.net"}
  ]);

  cargarStores("tech-stores",[
    {nombre:"Best Buy", link:"https://www.bestbuy.com"},
    {nombre:"Newegg", link:"https://www.newegg.com"},
    {nombre:"B&H Photo", link:"https://www.bhphotovideo.com"},
    {nombre:"Apple Store", link:"https://www.apple.com"}
  ]);

  cargarStores("calzados-stores",[
    {nombre:"Nike", link:"https://www.nike.com"},
    {nombre:"Adidas", link:"https://www.adidas.com"},
    {nombre:"Puma", link:"https://www.puma.com"},
    {nombre:"New Balance", link:"https://www.newbalance.com"},
    {nombre:"Skechers", link:"https://www.skechers.com"},
    {nombre:"Converse", link:"https://www.converse.com"}
  ]);

  cargarStores("hoteles-stores",[
    {nombre:"Expedia", link:"https://www.expedia.com"},
    {nombre:"Booking", link:"https://www.booking.com"},
    {nombre:"Skyscanner", link:"https://www.skyscanner.com"},
    {nombre:"Airbnb", link:"https://www.airbnb.com"}
  ]);

  cargarStores("lenceria-stores",[
    {nombre:"Victoria‚Äôs Secret", link:"https://www.victoriassecret.com"},
    {nombre:"Savage X Fenty", link:"https://www.savagex.com"},
    {nombre:"Adore Me", link:"https://www.adoreme.com"},
    {nombre:"ThirdLove", link:"https://www.thirdlove.com"},
    {nombre:"Zaful", link:"https://www.zaful.com"},
    {nombre:"YesStyle", link:"https://www.yesstyle.com"}
  ]);
});

/* Slider din√°mico */
let idx=0;
setInterval(()=>{
  const cont=document.querySelector(".slider-track");
  const card=document.querySelector(".offer-card");
  if(!cont||!card) return;
  const w=card.offsetWidth+16;
  idx=(idx+1)%document.querySelectorAll(".offer-card").length;
  cont.style.transform=`translateX(-${idx*w}px)`;
},4000);

/* Reveal scroll */
const reveal=()=>document.querySelectorAll(".reveal").forEach(e=>{
  if(e.getBoundingClientRect().top<window.innerHeight-80)e.classList.add("active");
});
window.addEventListener("scroll",reveal);
reveal();
</script>
</body>
</html>
